!function(o){function n(t){if(e[t])return e[t].exports;var i=e[t]={exports:{},id:t,loaded:!1};return o[t].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var e={};return n.m=o,n.c=e,n.p="",n(0)}([function(o,n,e){"use strict";function t(o,n,e){f.removeClass("leave").remove();var t,c;t=function(){},c=function(){},a.isFunction(o)&&(t=o),a.isFunction(n)&&(c=n),a.isPlainObject(o)?(w=a.extend({},C,o),t=w.callbackSuccess,c=w.callbackError):w=C,e&&(w.debug=!0),a("body").addClass("hb-login-body").append(y).append(k.hide()).append(f.hide()),k.fadeIn(400),f.fadeIn(100).addClass("enter");var m=a(window).scrollTop(),x=a(window).height(),U=f.outerHeight();x>U?f.css({top:m+x/2-U/2}):f.css({top:0}),k.on("click",i),b.on("click",i);var S=function(o){o.preventDefault(),p=!0,s.util.loading.show(),r({phone:a.trim(g.val()),password:v.val()}).done(function(o){s.util.loading.hide(),d.hide(),g.val(""),v.val(""),j.setToken(o.data.token),j.setUser(o.data.user),i(),t(o)}).fail(function(o){s.util.loading.hide(),d.text(o).show(),c(o)})};h.on("submit",S),g.on("blur",function(){p&&"phone"==u&&T.phone(a.trim(g.val())).then(function(o){d.hide()},function(o){d.text(o).show()})});var R=l();R&&f.one(R,function(){})}function i(){f.removeClass("enter");var o=l();o?(f.addClass("leave"),f.one(o,function(){a(this).removeClass("hb-login-body leave").remove()})):f.removeClass("hb-login-body leave").remove(),y.remove(),k.fadeOut(100).remove(),k.off("click",i),b.off("click",i)}function r(o){var n=a.Deferred();o=o||{};var e={dataType:"jsonp",url:"http://account.halobear.com/api/login",data:o,success:function(o,e,t){1==o.iRet?n.resolve(o):n.reject(o.info)},error:function(o,e,t){n.reject("网络繁忙请稍候再试")}};w.debug&&(e.url="http://account.hx.com/api/login");var t=function(){T.all(o).then(function(o){i()},function(o){n.reject(o)})},i=function(){a.ajax(e)};return t(),n.promise()}function l(){var o=document.createElement("div"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var e in n)if(void 0!==o.style[e])return n[e];return!1}e(1);var a=e(5),s=e(6),c=e(7),f=a(c),b=f.find("[hb-login-close]"),h=f.find("[hb-login-form]"),d=f.find("[hb-login-error]"),u="",p=!1,g=f.find("[hb-login-phone]"),v=f.find("[hb-login-password]"),m='<div class="hb-login-bg"></div>',x='<div class="hb-login-cover"></div>',k=a(m),y=a(x),w={},C={debug:!1,callbackSuccess:function(){},callbackError:function(){}},j=function(){var o=s.location.url("domain"),n=s.location.url("hostname");if("localhost"==n)var o="";else var o=s.location.url("domain")||"";var e=function(n){s.Cookies.set("halo_user",n,{domain:o,expires:30})},t=function(){return s.Cookies.getJSON("halo_user")},i=function(n){s.Cookies.set("halo_token",n,{domain:o,expires:30})},r=function(){return s.Cookies.getJSON("halo_token")},l=function(){s.Cookies.remove("halo_token",{domain:o})},a=function(){s.Cookies.remove("halo_user",{domain:o})},c=function(){l(),a()};return{setUser:e,getUser:t,removeUser:a,setToken:i,getToken:r,removeToken:l,clear:c}}();s.account=function(){return{login:t}}();var T=function(o){function n(o){var n=a.Deferred();switch(!0){case!o:u="phone",n.reject("请输入手机号");break;case!s.validation.checkPhone(o):u="phone",n.reject("您的手机号格式错误");break;default:n.resolve("phone good")}return n.promise()}function e(o){var n=a.Deferred();switch(!0){case!o:u="password",n.reject("请输入密码");break;default:n.resolve("pwd good")}return n.promise()}function t(o){return o=o||{},n(o.phone).then(function(n){return e(o.password)})}return{all:t,phone:n}}()},function(o,n,e){var t=e(2);"string"==typeof t&&(t=[[o.id,t,""]]);e(4)(t,{});t.locals&&(o.exports=t.locals)},function(o,n,e){n=o.exports=e(3)(),n.push([o.id,".hb-login{color:#666;font-family:Arial,Verdana,Tahoma,Hiragino Sans GB,Microsoft YaHei,SimSun,sans-serif;font-size:14px;line-height:1.5;width:374px;height:428px;position:absolute;z-index:10000;left:50%;margin-left:-187px;background:#fff;padding:57px 37px 0;border-radius:4px;-webkit-transition:opacity .3s,-webkit-transform .3s ease-out;transition:opacity .3s,-webkit-transform .3s ease-out;transition:transform .3s ease-out,opacity .3s;transition:transform .3s ease-out,opacity .3s,-webkit-transform .3s ease-out}.hb-login-body .hb-login.leave{opacity:0;-webkit-transform:translateY(25%);transform:translateY(25%)}.hb-login-close{position:absolute;right:9px;top:4px;cursor:pointer}.hb-login-close:hover{color:#ff409b}.hb-login-title{text-align:center;vertical-align:middle}.hb-login-form{margin-top:55px;position:relative}.hb-login-error{position:absolute;top:-25px;height:20px;line-height:20px;color:#ff409b}.hb-login-cover{z-index:9998}.hb-login-bg,.hb-login-cover{position:fixed;left:0;top:0;width:100%;height:100%}.hb-login-bg{z-index:9999;background:#000;opacity:.3}.ie8 .hb-login-bg{filter:alpha(opacity=30)}.hb-login-form-group{margin-top:20px}.hb-login-form-control-box{position:relative}.hb-login-form-control-box .haloIcon{color:#a1a1a1;font-size:20px;position:absolute;width:0;height:0;line-height:1}.hb-login-form-control-box .haloIcon-phone{font-size:18px;top:15px;left:9px}.hb-login-form-control-box .haloIcon-lock{top:15px;left:9px}.hb-login-form-control{height:50px;padding-left:42px;padding-top:14px;padding-bottom:14px}.hb-login-form-control::-webkit-input-placeholder{color:#a1a1a1}.hb-login-form-control:-moz-placeholder,.hb-login-form-control::-moz-placeholder{color:#a1a1a1}.hb-login-form-control:-ms-input-placeholder{color:#a1a1a1}.hb-login-form-control:focus{border-color:#ff409b;outline:0;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(255,64,155,.6)}.hb-login-btn{padding:11px 16px;font-size:14px;line-height:1.33333;border-radius:6px;color:#fff;background-color:#ff409b;border-color:#ff409b}.hb-login-btn.focus,.hb-login-btn:focus{color:#fff;background-color:#ff0d80;border-color:#c0005b}.hb-login-btn.active,.hb-login-btn:active,.hb-login-btn:hover,.open>.hb-login-btn.dropdown-toggle{color:#fff;background-color:#ff0d80;border-color:#ff037b}.hb-login-btn.active.focus,.hb-login-btn.active:focus,.hb-login-btn.active:hover,.hb-login-btn:active.focus,.hb-login-btn:active:focus,.hb-login-btn:active:hover,.open>.hb-login-btn.dropdown-toggle.focus,.open>.hb-login-btn.dropdown-toggle:focus,.open>.hb-login-btn.dropdown-toggle:hover{color:#fff;background-color:#e8006f;border-color:#c0005b}.hb-login-btn.active,.hb-login-btn:active,.open>.hb-login-btn.dropdown-toggle{background-image:none}.hb-login-btn.disabled.focus,.hb-login-btn.disabled:focus,.hb-login-btn.disabled:hover,.hb-login-btn[disabled].focus,.hb-login-btn[disabled]:focus,.hb-login-btn[disabled]:hover,fieldset[disabled] .hb-login-btn.focus,fieldset[disabled] .hb-login-btn:focus,fieldset[disabled] .hb-login-btn:hover{background-color:#ff409b;border-color:#ff409b}.hb-login-btn .badge{color:#ff409b;background-color:#fff}.hb-login-btn.btn:active,.hb-login-btn.btn:focus{outline:none}.hb-login-link{color:#666}.hb-login-link:hover{color:#666;text-decoration:underline}",""])},function(o,n){o.exports=function(){var o=[];return o.toString=function(){for(var o=[],n=0;n<this.length;n++){var e=this[n];e[2]?o.push("@media "+e[2]+"{"+e[1]+"}"):o.push(e[1])}return o.join("")},o.i=function(n,e){"string"==typeof n&&(n=[[null,n,""]]);for(var t={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(t[r]=!0)}for(i=0;i<n.length;i++){var l=n[i];"number"==typeof l[0]&&t[l[0]]||(e&&!l[2]?l[2]=e:e&&(l[2]="("+l[2]+") and ("+e+")"),o.push(l))}},o}},function(o,n,e){function t(o,n){for(var e=0;e<o.length;e++){var t=o[e],i=d[t.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](t.parts[r]);for(;r<t.parts.length;r++)i.parts.push(c(t.parts[r],n))}else{for(var l=[],r=0;r<t.parts.length;r++)l.push(c(t.parts[r],n));d[t.id]={id:t.id,refs:1,parts:l}}}}function i(o){for(var n=[],e={},t=0;t<o.length;t++){var i=o[t],r=i[0],l=i[1],a=i[2],s=i[3],c={css:l,media:a,sourceMap:s};e[r]?e[r].parts.push(c):n.push(e[r]={id:r,parts:[c]})}return n}function r(o,n){var e=g(),t=x[x.length-1];if("top"===o.insertAt)t?t.nextSibling?e.insertBefore(n,t.nextSibling):e.appendChild(n):e.insertBefore(n,e.firstChild),x.push(n);else{if("bottom"!==o.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");e.appendChild(n)}}function l(o){o.parentNode.removeChild(o);var n=x.indexOf(o);n>=0&&x.splice(n,1)}function a(o){var n=document.createElement("style");return n.type="text/css",r(o,n),n}function s(o){var n=document.createElement("link");return n.rel="stylesheet",r(o,n),n}function c(o,n){var e,t,i;if(n.singleton){var r=m++;e=v||(v=a(n)),t=f.bind(null,e,r,!1),i=f.bind(null,e,r,!0)}else o.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(e=s(n),t=h.bind(null,e),i=function(){l(e),e.href&&URL.revokeObjectURL(e.href)}):(e=a(n),t=b.bind(null,e),i=function(){l(e)});return t(o),function(n){if(n){if(n.css===o.css&&n.media===o.media&&n.sourceMap===o.sourceMap)return;t(o=n)}else i()}}function f(o,n,e,t){var i=e?"":t.css;if(o.styleSheet)o.styleSheet.cssText=k(n,i);else{var r=document.createTextNode(i),l=o.childNodes;l[n]&&o.removeChild(l[n]),l.length?o.insertBefore(r,l[n]):o.appendChild(r)}}function b(o,n){var e=n.css,t=n.media;if(t&&o.setAttribute("media",t),o.styleSheet)o.styleSheet.cssText=e;else{for(;o.firstChild;)o.removeChild(o.firstChild);o.appendChild(document.createTextNode(e))}}function h(o,n){var e=n.css,t=n.sourceMap;t&&(e+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */");var i=new Blob([e],{type:"text/css"}),r=o.href;o.href=URL.createObjectURL(i),r&&URL.revokeObjectURL(r)}var d={},u=function(o){var n;return function(){return"undefined"==typeof n&&(n=o.apply(this,arguments)),n}},p=u(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),g=u(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,m=0,x=[];o.exports=function(o,n){n=n||{},"undefined"==typeof n.singleton&&(n.singleton=p()),"undefined"==typeof n.insertAt&&(n.insertAt="bottom");var e=i(o);return t(e,n),function(o){for(var r=[],l=0;l<e.length;l++){var a=e[l],s=d[a.id];s.refs--,r.push(s)}if(o){var c=i(o);t(c,n)}for(var l=0;l<r.length;l++){var s=r[l];if(0===s.refs){for(var f=0;f<s.parts.length;f++)s.parts[f]();delete d[s.id]}}}};var k=function(){var o=[];return function(n,e){return o[n]=e,o.filter(Boolean).join("\n")}}()},function(o,n){o.exports=jQuery},function(o,n){o.exports=hb},function(o,n){o.exports='<div class="hb-login"><i hb-login-close class="haloIcon haloIcon-times hb-login-close"></i><div class="hb-login-title"><img src="http://7jptwn.com2.z0.glb.qiniucdn.com/hb-login-title.png" class="img"></div><form hb-login-form class="hb-login-form"><div hb-login-error class="hb-login-error"></div><div class="hb-login-form-group"><div class="hb-login-form-control-box"><i class="haloIcon haloIcon-phone"></i><input type="text" placeholder="幻熊通行证(手机号)" hb-login-phone class="form-control hb-login-form-control"></div></div><div class="hb-login-form-group"><div class="hb-login-form-control-box"><i class="haloIcon haloIcon-lock"></i><input type="password" placeholder="密码" hb-login-password class="form-control hb-login-form-control"></div></div><div class="hb-login-form-group"><button type="submit" class="btn btn-block hb-login-btn">登录</button></div><div class="hb-login-form-group clearfix"><a href="http://account.halobear.com/public/forget/" target="_blank" class="hb-login-link pull-left">忘记密码</a><a href="http://account.halobear.com/public/register/" target="_blank" class="hb-login-link pull-right">幻熊通行证注册</a></div></form></div>'}]);