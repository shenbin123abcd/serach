"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};!function(t,s,i,e){var o=t.fn.twbsPagination,a=function(i,e){if(this.$element=t(i),this.options=t.extend({},t.fn.twbsPagination.defaults,e),this.options.startPage<1||this.options.startPage>this.options.totalPages)throw new Error("Start page option is incorrect");if(this.options.totalPages=parseInt(this.options.totalPages),isNaN(this.options.totalPages))throw new Error("Total pages option is not correct!");if(this.options.visiblePages=parseInt(this.options.visiblePages),isNaN(this.options.visiblePages))throw new Error("Visible pages option is not correct!");if(this.options.totalPages<this.options.visiblePages&&(this.options.visiblePages=this.options.totalPages),this.options.onPageClick instanceof Function&&this.$element.first().on("page",this.options.onPageClick),this.options.href){var o,a=this.options.href.replace(/[-\/\\^$*+?.|[\]]/g,"\\$&");a=a.replace(this.options.hrefVariable,"(\\d+)"),null!=(o=new RegExp(a,"i").exec(s.location.href))&&(this.options.startPage=parseInt(o[1],10))}var n="function"==typeof this.$element.prop?this.$element.prop("tagName"):this.$element.attr("tagName");return"UL"===n?this.$listContainer=this.$element:this.$listContainer=t("<ul></ul>"),this.$listContainer.addClass(this.options.paginationClass),"UL"!==n&&this.$element.append(this.$listContainer),this.render(this.getPages(this.options.startPage)),this.setupEvents(),this.options.initiateStartPageClick&&this.$element.trigger("page",this.options.startPage),this};a.prototype={constructor:a,destroy:function(){return this.$element.empty(),this.$element.removeData("twbs-pagination"),this.$element.off("page"),this},show:function(t){if(1>t||t>this.options.totalPages)throw new Error("Page is incorrect.");return this.render(this.getPages(t)),this.setupEvents(),this.$element.trigger("page",t),this},buildListItems:function(t){var s=[];if(this.options.first&&s.push(this.buildItem("first",1)),this.options.prev){var i=t.currentPage>1?t.currentPage-1:this.options.loop?this.options.totalPages:1;s.push(this.buildItem("prev",i))}this.options.ellipsis&&t.numeric[0]>1&&(2==t.numeric[0]?s.push(this.buildItem("ellipsis",t.currentPage)):(s.push(this.buildItem("page",1)),s.push(this.buildItem("ellipsis",t.currentPage))));for(var e=0;e<t.numeric.length;e++)s.push(this.buildItem("page",t.numeric[e]));if(this.options.ellipsis&&t.numeric[t.numeric.length-1]<this.options.totalPages&&(t.numeric[t.numeric.length-1]==this.options.totalPages-1?s.push(this.buildItem("ellipsis",t.currentPage)):(s.push(this.buildItem("ellipsis",t.currentPage)),s.push(this.buildItem("page",this.options.totalPages)))),this.options.next){var o=t.currentPage<this.options.totalPages?t.currentPage+1:this.options.loop?1:this.options.totalPages;s.push(this.buildItem("next",o))}return this.options.last&&s.push(this.buildItem("last",this.options.totalPages)),s},buildItem:function(s,i){var e=t("<li></li>"),o=t("<a></a>"),a=null;switch(s){case"page":a=i,e.addClass(this.options.pageClass);break;case"first":a=this.options.first,e.addClass(this.options.firstClass);break;case"prev":a=this.options.prev,e.addClass(this.options.prevClass);break;case"next":a=this.options.next,e.addClass(this.options.nextClass);break;case"last":a=this.options.last,e.addClass(this.options.lastClass);break;case"ellipsis":a=this.options.ellipsis,e.addClass(this.options.ellipsisClass)}return e.data("page",i),e.data("page-type",s),"ellipsis"==s?e.append("<span>"+a+"</span>"):e.append(o.attr("href",this.makeHref(i)).html(a)),e},buildPaginationControl:function(s,i){if(this.options.paginationControl){this.$listContainer.addClass("media-middle");var e='\n                <form class="form-inline pagination media-middle '+this.options.paginationControlClass+'">\n                  <div class="form-group">\n                    <div class="form-control-static">共'+s+'页 到第</div>\n                  </div>\n                  <div class="form-group">\n                    <input type="text" class="form-control" value="'+i+'"  placeholder="页数">\n                  </div>\n                  <div class="form-group">\n                    <div class="form-control-static">页</div>\n                  </div>\n                  <button type="submit" class="btn btn-default">确定</button>\n                  </form>\n            ';this.$listContainer.after(e);var o=t(e);return o}},getPages:function(t){var s=[],i=Math.floor(this.options.visiblePages/2),e=t-i+1-this.options.visiblePages%2,o=t+i;0>=e&&(e=1,o=this.options.visiblePages),o>this.options.totalPages&&(e=this.options.totalPages-this.options.visiblePages+1,o=this.options.totalPages);for(var a=e;o>=a;)s.push(a),a++;return{currentPage:t,numeric:s}},render:function(s){var i=this;this.$listContainer.children().remove(),this.$listContainer.append(this.buildListItems(s)),this.$listContainer.children().each(function(){var e=t(this),o=e.data("page-type");switch(o){case"page":e.data("page")===s.currentPage&&e.addClass(i.options.activeClass);break;case"first":e.toggleClass(i.options.disabledClass,1===s.currentPage);break;case"last":e.toggleClass(i.options.disabledClass,s.currentPage===i.options.totalPages);break;case"prev":e.toggleClass(i.options.disabledClass,!i.options.loop&&1===s.currentPage);break;case"next":e.toggleClass(i.options.disabledClass,!i.options.loop&&s.currentPage===i.options.totalPages)}}),this.options.paginationControl&&(this.$listContainer.nextAll().remove(),this.buildPaginationControl(this.options.totalPages,s.currentPage))},setupEvents:function(){var i=this;if(this.$listContainer.find("li").each(function(){var s=t(this);return s.off(),s.hasClass(i.options.disabledClass)||s.hasClass(i.options.activeClass)?void s.on("click",!1):void s.click(function(t){!i.options.href&&t.preventDefault(),i.show(parseInt(s.data("page")))})}),this.options.paginationControl){var e=this.$listContainer.next("form").find('input[type="text"]'),o=this.$listContainer.next("form");e.on("change keyup",function(){var s=t(this),e=s.val();s.val(e.replace(/\D/g,"")),e=Number(s.val()),e>i.options.totalPages&&s.val(i.options.totalPages)}),o.on("submit",function(o){var a=parseInt(e.val()),n=t(this);n.off(),o.preventDefault(),s.location.href=i.makeHref(a),i.show(parseInt(a))})}},makeHref:function(t){return this.options.href?this.options.href.replace(this.options.hrefVariable,t):"#"}},t.fn.twbsPagination=function(s){var i,o=Array.prototype.slice.call(arguments,1),n=t(this),r=n.data("twbs-pagination"),l="object"===("undefined"==typeof s?"undefined":_typeof(s))&&s;return r||n.data("twbs-pagination",r=new a(this,l)),"string"==typeof s&&(i=r[s].apply(r,o)),i===e?n:i},t.fn.twbsPagination.defaults={totalPages:0,startPage:1,visiblePages:5,initiateStartPageClick:!0,href:!1,hrefVariable:"{{number}}",first:"First",prev:"Previous",next:"Next",last:"Last",loop:!1,onPageClick:null,paginationClass:"pagination",nextClass:"next",prevClass:"prev",lastClass:"last",firstClass:"first",pageClass:"page",activeClass:"active",disabledClass:"disabled",ellipsisClass:"ellipsis",ellipsis:"...",paginationControlClass:"pagination-control",paginationControl:!0},t.fn.twbsPagination.Constructor=a,t.fn.twbsPagination.noConflict=function(){return t.fn.twbsPagination=o,this}}(window.jQuery,window,document);